var setRaceInterval,getReaceWrap=document.getElementById("raceWrap"),getRace=document.getElementById("race"),rCtx=getRace.getContext("2d"),canvasWidth=getRace.width,canvasHeight=getRace.height,block=10,getColumns=canvasWidth/block,getBody=document.body,score=0,getScore=0,speed=20,lvl=1,moveLeft=document.getElementById("leftMove"),moveRight=document.getElementById("rightMove"),directions={68:"right",65:"left"},getRestartBtn=document.getElementById("restartRace"),getPlayBtn=document.getElementById("startGame");function addBorders(){rCtx.fillStyle="#0770BB",rCtx.fillRect(0,0,canvasWidth,block),rCtx.fillRect(canvasWidth-block,0,block,canvasHeight),rCtx.fillRect(0,canvasHeight-block,canvasWidth,block),rCtx.fillRect(0,0,block,canvasHeight)}function endGame(){clearTimeout(setRaceInterval),rCtx.font="30px Montserrat",rCtx.fillStyle="#eee",rCtx.textAlign="center",rCtx.fillText("End Game",canvasWidth/2,10*block),initCar.isCollision=!0,getRestartBtn.classList.add("show")}function outputScore(){rCtx.clearRect(block,block,canvasWidth-2*block,2*block),rCtx.font="15px Montserrat",rCtx.fillStyle="#EF9B0F",rCtx.textAlign="left",rCtx.fillText("score: "+score,block+5,2.5*block)}function outputLvl(){rCtx.clearRect(canvasWidth-7*block,block,5*block,2*block),rCtx.font="15px Montserrat",rCtx.fillStyle="#EF9B0F",rCtx.textAlign="left",rCtx.fillText("level: "+lvl,canvasWidth-7*block,2.5*block)}function setScoreAndSpeed(){setInterval(function(){if(score+=5,(getScore+=5)>=100)return getScore=0,lvl++,(speed-=2)<=2&&(speed=2),speed},1e3)}function CarParts(t,e){this.col=t,this.row=e,this.draw=function(){var t=this.col,e=this.row;rCtx.fillRect(t,e,3*block,5*block)}}function Car(){this.x=canvasWidth/2-block,this.y=canvasHeight-8*block,this.isCollision=!1,this.car=new CarParts(this.x,this.y,3*block,5*block),this.carPosition=function(){rCtx.fillStyle="#023560",new CarParts(this.x,this.y,3*block,5*block),rCtx.fillRect(this.x,this.y,3*block,5*block),this.carDecoration(),(this.x>canvasWidth-4*block||this.x<block)&&(this.isCollision=!0,endGame())}}addBorders(),Car.prototype.carCoords=function(){return{x:this.x,y:this.y}},Car.prototype.carDecoration=function(){rCtx.fillStyle="#eee",rCtx.fillRect(this.x+block,this.y+2*block,block,2*block),rCtx.fillRect(this.x,this.y,3*block,1),rCtx.fillRect(this.x+3*block-1,this.y,1,5*block),rCtx.fillRect(this.x,this.y+5*block-1,3*block,1),rCtx.fillRect(this.x,this.y,1,5*block)},Car.prototype.drawCar=function(){rCtx.fillStyle="#023560",this.car.draw(),this.carDecoration()},Car.prototype.pcControllers=function(t){"left"==t&&(this.x-=block,rCtx.clearRect(this.x+block,this.y,3*block,5*block)),"right"==t&&(this.x+=block,rCtx.clearRect(this.x-block,this.y,3*block,5*block)),this.carPosition()},Car.prototype.mobileControllers=function(t){t.classList.contains("move-left")&&(this.x-=block,rCtx.clearRect(this.x+block,this.y,3*block,5*block)),t.classList.contains("move-right")&&(this.x+=block,rCtx.clearRect(this.x-block,this.y,3*block,5*block)),this.carPosition()};var initCar=new Car;function Bots(t,e){this.x=t,this.y=e,this.speed=1,this.drawBots=function(){rCtx.fillStyle="#333",rCtx.fillRect(this.x,this.y,3*block,5*block),rCtx.fillStyle="#EF9B0F",rCtx.fillRect(this.x+block,this.y+2*block,block,2*block),rCtx.fillRect(this.x,this.y,3*block,1),rCtx.fillRect(this.x+3*block-1,this.y,1,5*block),rCtx.fillRect(this.x,this.y+5*block-1,3*block,1),rCtx.fillRect(this.x,this.y,1,5*block)},this.botStep=function(){return{x:this.x,y:this.y}},this.moveBots=function(){if(rCtx.clearRect(this.x,this.y,3*block,5*block),this.y+=this.speed,this.y>canvasHeight){this.y=2*block;var t=Math.floor(Math.random()*(getColumns-4))+1;this.x=t*block}this.drawBots()}}function setMinAndMax(t,e){return Math.floor(Math.random()*(e-t+1))+t}initCar.drawCar();var botsCreator=[],setBotCoords=[setMinAndMax(-10,-10),setMinAndMax(2,3),setMinAndMax(14,15)];function outputBots(){for(var t=0;t<setBotCoords.length;t++){var e=Math.floor(Math.random()*(getColumns-4))+1;botsCreator.push(new Bots(e*block,10*setBotCoords[t],3*block,5*block))}}function moveBots(){for(var t=0;t<botsCreator.length;t++)botsCreator[t].moveBots();addBorders()}function checkCollisions(){for(var t=initCar.carCoords(),e=[],o=0;o<setBotCoords.length;o++)e.push(botsCreator[o].botStep());for(var i in e){var l=e[i].x,c=e[i].y;c>=27*block&&c<=37*block&&(l==t.x?endGame():l+2*block==t.x?endGame():l+block==t.x?endGame():l-2*block==t.x?endGame():l-block==t.x&&endGame())}}function mobileControllers(t){0!=initCar.isCollision||getReaceWrap.classList.contains("not-active")||initCar.mobileControllers(t)}function startGame(){setRaceInterval=setTimeout(function t(){setRaceInterval=setTimeout(t,speed),moveBots(),checkCollisions(),outputScore(),outputLvl()},speed)}getBody.addEventListener("keydown",function(t){var e=directions[t.keyCode];if(0!=initCar.isCollision||getReaceWrap.classList.contains("not-active"))return!1;initCar.pcControllers(e)}),moveLeft.addEventListener("click",function(t){mobileControllers(t.target)}),moveRight.addEventListener("click",function(t){mobileControllers(t.target)}),getPlayBtn.addEventListener("click",function(){outputBots(),outputScore(),outputLvl(),setScoreAndSpeed(),startGame(),this.style.display="none",getReaceWrap.classList.remove("not-active")}),getRestartBtn.addEventListener("click",function(){rCtx.clearRect(0,0,canvasWidth,canvasHeight),(initCar=new Car).drawCar(),botsCreator=[],setBotCoords=[],setBotCoords=[setMinAndMax(-10,-10),setMinAndMax(2,3),setMinAndMax(14,15)],outputBots(),score=0,speed=20,getScore=0,lvl=1,clearInterval(setRaceInterval),startGame(),this.classList.remove("show")});
//# sourceMappingURL=race.js.map
